Пояснительная записка к курсовой работе.(version 1.1)

Тема: Магазин по продаже радиодеталей.


БД представляет собой интернет-магазин радиодеталей с добавлением интересных проектов, а также поиском аналогов радиодеталей.
За основу БД были взяты сайты:
а). chipdip.ru
б). amperka.ru
в). cxem.net

БД содержит в себе 13 таблиц.

users и accounts
Таблицы users и accounts содержат информацию о пользователях сайта. users – имя пользователя, почта и телефон. accounts – пол, день рождения и родной город, по user_id осуществляется связь с таблицей users.

cardholders
Таблица cardholders содержит в себе информацию о картах пользователей. Карты магазина являются накопительными (1 р = 1 бонус). Раздел содержит в себе номер карты, сумму потраченную в магазине и сумму, которую он накопил.

catalogs
Таблица catalogs содержит разделы интернет магазина. Главные разделы магазина.





type_goods
Таблица type_goods содержит в себе типы товаров, основанных на таблице catalogs.
Фактически подразделы каталогов. Кроме id и name содержит catalog_id, который отвечает за связь с таблицей catalogs. Например, электронные компоненты (в catalogs) – это и резисторы и конденсаторы и диоды и т.д (в type_goods) .  

manufacturer
Таблица manufacturer содержит в себе информацию о стране-производителе товара. Содержит id и name страны-производителя.

goods
Таблица goods содержит информацию о товарах. Содержит id, name, price товара, также характеристики (datasheet) и описание (description_prod). Для связи с таблицами catalogs, manufacturer, type_goods введены специальные ключи.

radio_analogs  
Таблица radio_analogs  содержит информацию об аналогах электронных компонентов. Довольно часто при проектировании радиотехнического устройства люди сталкиваются с проблемой отсутствия нужных радиодеталей. Но у многих радиодеталей есть аналоги, которые устраняют данную проблему. Также  можно выбрать более дешевый вариант из представленных, что позволяет минимизировать траты в больших проектах.

orders
Таблица orders содержит информацию о заказах (как доставка, так и самовывоз). Данная таблица имеет ключ, отсылающий нас к пользователю оформившему заказ.

delivery
Таблица delivery содержит в себе информацию о доставке. По сути подмножество orders. То есть те заказы, которые оформлены доставкой. Имеет ключ, отсылающий нас к таблице orders.

reviews
Таблица reviews содержит в себе информацию об отзывах пользователей. Пользователи могут поставить лайк или дислайк товару (+/-) и написать текст к самому отзыву.
В версии 1.1 + и - заменены на оценки по 10-бальной шкале.

discounts
Таблица discounts содержит в себе информацию о скидках на товары. Акции на товары представленные в интернет-магазине. Имеет связь с таблицей товаров.

projects
Таблица projects содержит в себе информацию о проектах. Проекты имеют свой рейтинг сложности от 1 до 10, чтобы каждый пользователь мог выбрать то, что ему по силам. Каждый проект имеет основной элемент, на основе которого и выстраивается проект. Допускается, что при переходе на странице товара уже на сайте в конце страницы высвечивался проект, в котором этот товар задействован. 

Запросы.
- Запрос товара по типу и сортировка по цене.
- Запрос самый дешевый товара.
- Запрос и расчет количества эл. компонентов, произведенных в той или иной стране.
- Запрос аналогов по наименования товара.
-Запрос товара при ограничении бюджета.
- Запрос описания товара.
- Запрос имени владельца карты, у которого самая большая сумма покупок.
- Соотношение типа товара к товару.
- Соотношение каталога к подкаталогу
- Полная информация о пользователе.
- Товар <-> Отзыв
- ТОП-5 заказов и их авторов по цене.
- Посмотрим среднюю сумму всех заказов.
- Посмотрим отрицательные отзывы, чтобы понять над чем работать.
- Выбор проекта по сложности.
- Подарок по сумме накоплений на карте.



Представления.
Представление goods_info содержит информацию о товаре. Название – каталог – тип.
Представление cardholder_info содержит полную информацию о владельце карты.

Версия 1.1.
Представление delivery_info - информация о доставке (имя заказчика, телефон, адрес доставки и стоимость заказа). 

Триггеры.
У каждой таблицы есть триггер, запрещающий вносить NULL-значения (названия по типу insert_to_catalog).

Процедуры.
Процедура project_price подсчитывает стоимость проекта. Процедура интересна тем, что она берет информацию из строки, где через запятую перечисляются наименования элементов, необходимых для сборки девайса. Фактически процедура форматирует строку по символу ‘,’.
Процедура cheap_analog выбирает что дешевле оригинал или аналог.
Процедура discount_goods расчета скидки на товар и внесение изменений на цену в таблицу goods.
Процедура сравнения лайков и дислайков reviews_count.

Версия 1.1.
Процедура orders_cardholders вносит новый значения в таблицу заказа и для тех у кого есть карта прибавляет сумму покупок и высчитывает сумму накопления (10% от стоимости заказа).
Процедура goods_rating расчета (по оценкам пользователей) и добавления среднего рейтинга товара в таблицу goods. Для этого создана специальная колонка avg_rating. 
Процедура personal_discount "Персональной скидки" по сумме покупок на карте покупателя, 25000 -5%, 50000 -10%, 100000 -15%, 200000 и более 20%.



